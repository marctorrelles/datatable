
import gql from 'graphql-tag'
import { ReactNode, useMemo, useState } from 'react'

/**
 * Generic types and utils here
 */
export type Maybe<T> = T | null
export type InputMaybe<T> = Maybe<T>
export type Exact<T extends { [key: string]: unknown }> = {
  [K in keyof T]: T[K]
}
export type MakeOptional<T, K extends keyof T> = Omit<T, K> & {
  [SubKey in K]?: Maybe<T[SubKey]>
}
export type MakeMaybe<T, K extends keyof T> = Omit<T, K> & {
  [SubKey in K]: Maybe<T[SubKey]>
}
export type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>
/** All built-in and custom scalars, mapped to their actual values */
export type Scalars = {
  ID: string
  String: string
  Boolean: boolean
  Int: number
  Float: number
}
export type AnyVariables =
  | {
      [prop: string]: any
    }
  | void
  | undefined

export type DataTableData<T> = {
  variables: AnyVariables
  query: any
  initialProjections: Projection<T>[]
  projections: Projection<T>[]
  setProjections: (projections: Projection<T>[]) => void
  resolvers: {
    main: (data: any) => any
    fields: Exact<Record<keyof T, (data: any) => any>>
  }
}

interface ProjectionArgs<T, F extends (keyof T)[]> {
  title: string
  visible?: boolean
  fields: F
  render?: (object: Pick<T, F[number]>) => ReactNode
}

function projection<T>(args: ProjectionArgs<T, (keyof T)[]>) {
  return args
}

export type ProjectionBuiler<T> = (
  args: ProjectionArgs<T, (keyof T)[]>
) => typeof args

export type Projection<T> = ReturnType<ProjectionBuiler<T>>

export type DataTableConfig<T> = {
  projections: Projection<T>[]
  data: DataTableData<T>
}

const getVariables = <T>(
  queryIncludesArray: string[] | readonly string[],
  projections: Projection<T>[]
) => {
  const variablesObject = [...queryIncludesArray].reduce(
    (memo, key) => ({
      ...memo,
      [key]: false,
    }),
    {}
  ) as any

  projections.forEach((projection) => {
    projection.fields.forEach((field) => {
      const key = `include${(field as string)[0].toUpperCase()}${(
        field as string
      ).slice(1)}` as keyof typeof variablesObject
      variablesObject[key] = true
    })
  })

  return variablesObject
}


// This is the autogenerated part!
"{\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"EmployeesDataTable\",\"loc\":{\"start\":37,\"end\":55}},\"variableDefinitions\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"employees\",\"loc\":{\"start\":60,\"end\":69}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"dataSource\",\"loc\":{\"start\":71,\"end\":81}},\"arguments\":[],\"loc\":{\"start\":70,\"end\":81}}],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"access\",\"loc\":{\"start\":88,\"end\":94}},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"lastName\",\"loc\":{\"start\":103,\"end\":111}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":113,\"end\":118}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":119,\"end\":121}},\"value\":{\"kind\":\"StringValue\",\"value\":\"accessLastName\",\"block\":false,\"loc\":{\"start\":123,\"end\":139}},\"loc\":{\"start\":119,\"end\":139}}],\"loc\":{\"start\":112,\"end\":140}}],\"loc\":{\"start\":103,\"end\":140}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"firstName\",\"loc\":{\"start\":147,\"end\":156}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":158,\"end\":163}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":164,\"end\":166}},\"value\":{\"kind\":\"StringValue\",\"value\":\"accessFirstName\",\"block\":false,\"loc\":{\"start\":168,\"end\":185}},\"loc\":{\"start\":164,\"end\":185}}],\"loc\":{\"start\":157,\"end\":186}}],\"loc\":{\"start\":147,\"end\":186}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"email\",\"loc\":{\"start\":193,\"end\":198}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":200,\"end\":205}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":206,\"end\":208}},\"value\":{\"kind\":\"StringValue\",\"value\":\"accessEmail\",\"block\":false,\"loc\":{\"start\":210,\"end\":223}},\"loc\":{\"start\":206,\"end\":223}}],\"loc\":{\"start\":199,\"end\":224}}],\"loc\":{\"start\":193,\"end\":224}}],\"loc\":{\"start\":95,\"end\":230}},\"loc\":{\"start\":88,\"end\":230}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"company\",\"loc\":{\"start\":235,\"end\":242}},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\",\"loc\":{\"start\":251,\"end\":255}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":257,\"end\":262}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":263,\"end\":265}},\"value\":{\"kind\":\"StringValue\",\"value\":\"companyName\",\"block\":false,\"loc\":{\"start\":267,\"end\":280}},\"loc\":{\"start\":263,\"end\":280}}],\"loc\":{\"start\":256,\"end\":281}}],\"loc\":{\"start\":251,\"end\":281}}],\"loc\":{\"start\":243,\"end\":287}},\"loc\":{\"start\":235,\"end\":287}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"subordinates\",\"loc\":{\"start\":292,\"end\":304}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":306,\"end\":311}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":312,\"end\":314}},\"value\":{\"kind\":\"StringValue\",\"value\":\"subordinates\",\"block\":false,\"loc\":{\"start\":316,\"end\":330}},\"loc\":{\"start\":312,\"end\":330}}],\"loc\":{\"start\":305,\"end\":331}}],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"access\",\"loc\":{\"start\":340,\"end\":346}},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"firstName\",\"loc\":{\"start\":357,\"end\":366}},\"arguments\":[],\"directives\":[],\"loc\":{\"start\":357,\"end\":366}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"lastName\",\"loc\":{\"start\":375,\"end\":383}},\"arguments\":[],\"directives\":[],\"loc\":{\"start\":375,\"end\":383}}],\"loc\":{\"start\":347,\"end\":391}},\"loc\":{\"start\":340,\"end\":391}}],\"loc\":{\"start\":332,\"end\":397}},\"loc\":{\"start\":292,\"end\":397}},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"job\",\"loc\":{\"start\":402,\"end\":405}},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\",\"loc\":{\"start\":414,\"end\":418}},\"arguments\":[],\"directives\":[{\"kind\":\"Directive\",\"name\":{\"kind\":\"Name\",\"value\":\"field\",\"loc\":{\"start\":420,\"end\":425}},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\",\"loc\":{\"start\":426,\"end\":428}},\"value\":{\"kind\":\"StringValue\",\"value\":\"jobName\",\"block\":false,\"loc\":{\"start\":430,\"end\":439}},\"loc\":{\"start\":426,\"end\":439}}],\"loc\":{\"start\":419,\"end\":440}}],\"loc\":{\"start\":414,\"end\":440}}],\"loc\":{\"start\":406,\"end\":446}},\"loc\":{\"start\":402,\"end\":446}}],\"loc\":{\"start\":82,\"end\":450}},\"loc\":{\"start\":60,\"end\":450}}],\"loc\":{\"start\":56,\"end\":452}},\"loc\":{\"start\":31,\"end\":452}}]}"

export type Access = {
  __typename?: 'Access';
  email?: Maybe<Scalars['String']>;
  firstName?: Maybe<Scalars['String']>;
  id?: Maybe<Scalars['ID']>;
  lastName?: Maybe<Scalars['String']>;
};

export type Company = {
  __typename?: 'Company';
  employees?: Maybe<Array<Employee>>;
  id?: Maybe<Scalars['ID']>;
  industry?: Maybe<Scalars['String']>;
  name?: Maybe<Scalars['String']>;
};

export type Employee = {
  __typename?: 'Employee';
  access?: Maybe<Access>;
  address?: Maybe<Scalars['String']>;
  company?: Maybe<Company>;
  hiringDate?: Maybe<Scalars['String']>;
  id?: Maybe<Scalars['ID']>;
  job?: Maybe<Job>;
  subordinates?: Maybe<Array<Employee>>;
  zipCode?: Maybe<Scalars['String']>;
};

export type Job = {
  __typename?: 'Job';
  id?: Maybe<Scalars['ID']>;
  name?: Maybe<Scalars['String']>;
  salary?: Maybe<Scalars['String']>;
};

export type Query = {
  __typename?: 'Query';
  companies?: Maybe<Array<Company>>;
  company?: Maybe<Company>;
  employee?: Maybe<Employee>;
  employees?: Maybe<Array<Employee>>;
};


export type QueryCompanyArgs = {
  id?: InputMaybe<Scalars['ID']>;
};


export type QueryEmployeeArgs = {
  id?: InputMaybe<Scalars['ID']>;
};


export type QueryEmployeesArgs = {
  first?: InputMaybe<Scalars['Int']>;
};
